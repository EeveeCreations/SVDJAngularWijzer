<app-admin-nav></app-admin-nav>

<section class="center-view-box">

    <section class="left-list">
        <button (click)="newQuestion()" class="new">
            +
        </button>

        <app-question-item [questions]="questions" (onQuestionSelected)="editQuestion($event)"></app-question-item>
    </section>

    <section class="right-form">

        <form *ngIf="currentQuestion">

            <p class="error">{{errorLabel}}</p>

            <input type="text" placeholder="Vraag" [(ngModel)]="currentQuestion.questionText" name="Question"/>

            <h2>Antwoorden</h2>

            <div class="answer-container">
                <div class="answer-item" *ngFor="let answer of currentQuestion.answers; let i = index">
                    <input type="text" placeholder="Antwoord" [(ngModel)]="answer.answerText" name="{{answer.answerID}}" class="smaller-field"/>
                    <!-- Next question of advice koppelen -->

                    <div class="reference-point">
                        <b>vraag</b>
                        <label class="switch">
                            <input id="{{i}}" type="checkbox" title="questionOrAdvice" (change)="true" #checkBox [checked]="answer.advice !== null">
                            <span class="slider"></span>
                        </label>
                        <b>advies</b>

                        <div class="select-boxes">

                            <select title="nextQuestionBox" name="nextQuestion" *ngIf="!checkBox.checked" (change)="changeNextQuestion(i, $event.target.value)">
                                <option [value]="answer.nextQuestion.questionID" *ngIf="answer.nextQuestion !== null" selected>Origineel: Vraag #{{answer.nextQuestion.questionID}}: {{answer.nextQuestion.questionText}}</option>
                                <option *ngIf="answer.nextQuestion === null" disabled selected>Selecteer graag een volgende vraag</option>
                                <option *ngFor="let question of questions" [value]="question.questionID">Vraag #{{question.questionID}}: {{question.questionText}}</option>
                            </select>

                            <select title="nextAdviceBox" name="nextAdvice" *ngIf="checkBox.checked" (change)="changeNextAdvice(i, $event.target.value)">
                                <option [value]="answer.advice.adviceID" *ngIf="answer.advice !== null" selected >Origineel: Advies #{{answer.advice.adviceID}}: {{answer.advice.name}}</option>
                                <option *ngIf="answer.advice === null" disabled selected>Selecteer graag een advies</option>
                                <option *ngFor="let advice of advices" [value]="advice.adviceID">Advies #{{advice.adviceID}}: {{advice.name}}</option>
                            </select>
                            
                        </div>
                    </div>
                </div>

                <button type="button" (click)="addAnswerToQuestion()" class="add-answer" *ngIf="currentQuestion.answers.length < 4">
                    +
                </button>
            </div>

            <h2>Meer Informatie<b>(niet verplicht)</b></h2>

            <input type="text" placeholder="Titel" [(ngModel)]="currentQuestion.extraInfoTile" name="extraInfoTitle"/>

            <textarea type="text" placeholder="Extra info" [(ngModel)]="currentQuestion.extraInfoDescription" name="extraInfoDescription"></textarea>

            <input type="text" placeholder="Info Video URL" [(ngModel)]="currentQuestion.extraInfoVideoURL" name="extraInfoTitle"/>

            <button type="button" (click)="saveQuestion()" class="svdj-button">
                Opslaan <i class="button-corner"></i>
            </button>
        </form>

        <section class="nothing-selected">
            Niks geselecteerd
        </section>
    </section>

</section>